{% extends "install/install.html.twig" %}
{% block content %}
<div id="step_3" class="container">
    <div class="alert alert-info">
        {% trans %}<strong>Atenção:</strong> O banco de dados especificado precisa existir. A aplicação procurará por versões anteriores para atualizar o banco. Caso não exista uma versão, ou não queira atualizar, certifique-se que a banco esteja vazio.{% endtrans %}
    </div>
    <form role="form" onsubmit="return false">
        <fieldset>
            <legend>{% trans %}Banco de Dados{% endtrans %}</legend>
            <div id="db_test_success" class="alert alert-success" style="display: none">
            </div>
            <div id="db_test_error" class="alert alert-danger" style="display: none">
            </div>
            <div class="form-group">
                <label>Tipo:</label>
                <abbr class="db-type" title="{% trans %}Escolhido no passo 1{% endtrans %}">{{ rbmsName }}</abbr>
            </div>
            <div class="form-group">
                <label for="db_host">Host:</label>
                <input type="text" id="db_host" class="form-control" onchange="SGA.Install.onChangeData()" />
            </div>
            <div class="form-group">
                <label for="db_port">Porta:</label>
                <input type="text" id="db_port" class="form-control" onchange="SGA.Install.onChangeData()" />
            </div>
            <div class="form-group">
                <label for="db_user">Usuário:</label>
                <input type="text" id="db_user" class="form-control" onchange="SGA.Install.onChangeData()" />
            </div>
            <div class="form-group">
                <label for="db_pass">Senha:</label>
                <input type="password" id="db_pass" class="form-control" onchange="SGA.Install.onChangeData()" />
            </div>
            <div class="form-group">
                <label for="db_name">Database:</label>
                <input type="text" id="db_name" class="form-control" onchange="SGA.Install.onChangeData()" />
            </div>
            <div class="alert alert-block">É necessário testar o banco antes de prosseguir.
                <button id="btn_test_db" class="btn btn-default" onclick="SGA.Install.testDB()"
                        title="{% trans %}Clique para testar a conexão com o Banco de Dados.{% endtrans %}">{% trans %}Testar{% endtrans %}</button>
            </div>
        </fieldset>
    </form>
    <script type="text/javascript">
        {% for field, message in data.database %}
        SGA.Install.dbData.{{ field }} = "{{ data.database[field] }}";
        {% endfor %}
        SGA.Install.loadDatabaseData();
    </script>
</div>
{% endblock %}