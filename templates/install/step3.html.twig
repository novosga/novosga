{% extends "install/install.html.twig" %}

{% block content %}
    <div id="step_3">
        <div class="alert alert-info">
            {% trans %}<strong>Atenção:</strong> O banco de dados especificado precisa existir. A aplicação procurará por versões anteriores para atualizar o banco. Caso não exista uma versão, ou não queira atualizar, certifique-se que a banco esteja vazio.{% endtrans %}
        </div>
        <form role="form" onsubmit="return false">
            <fieldset>
                <legend>{% trans %}Banco de Dados{% endtrans %}</legend>
                <div id="db_test_success" class="alert alert-success" style="display: none">
                </div>
                <div id="db_test_error" class="alert alert-danger" style="display: none">
                </div>
                <div class="form-group">
                    <label>Tipo:</label>
                    <abbr class="db-type" title="{% trans %}Escolhido no passo 1{% endtrans %}">{{ rdmsName }}</abbr>
                </div>
                <div class="form-group">
                    <label for="host">Host:</label>
                    <input type="text" id="host" class="form-control" onchange="SGA.Install.onChangeData()" />
                </div>
                <div class="form-group">
                    <label for="port">{% trans %}Porta{% endtrans %}:</label>
                    <input type="text" id="port" class="form-control" onchange="SGA.Install.onChangeData()" />
                </div>
                <div class="form-group">
                    <label for="user">{% trans %}Usuário {% endtrans %}:</label>
                    <input type="text" id="user" class="form-control" onchange="SGA.Install.onChangeData()" />
                </div>
                <div class="form-group">
                    <label for="password">{% trans %}Senha{% endtrans %}:</label>
                    <input type="password" id="password" class="form-control" onchange="SGA.Install.onChangeData()" />
                </div>
                <div class="form-group">
                    <label for="dbname">Database:</label>
                    <input type="text" id="dbname" class="form-control" onchange="SGA.Install.onChangeData()" />
                </div>
                <div class="form-group">
                    <label for="dbname">Charset:</label>
                    <input type="text" id="charset" class="form-control" onchange="SGA.Install.onChangeData()" />
                </div>
                <div class="alert alert-block">
                    {% trans %}É necessário testar o banco antes de prosseguir.{% endtrans %}
                    <button id="btn_test_db" class="btn btn-default" onclick="SGA.Install.testDB()"
                            title="{% trans %}Clique para testar a conexão com o Banco de Dados.{% endtrans %}">{% trans %}Testar{% endtrans %}</button>
                </div>
            </fieldset>
        </form>
        <script type="text/javascript">
            {% for field, message in data.database %}
            SGA.Install.dbData.{{ field }} = "{{ data.database[field] }}";
            {% endfor %}
            SGA.Install.loadDatabaseData();
        </script>
    </div>
{% endblock %}